---
import { getCollection } from 'astro:content';
import BaseLayout from '@/layouts/BaseLayout.astro';

const posts = (await getCollection('blog'))
  .filter((post) => !post.data.draft)
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());

const latestPost = posts[0];
---

<BaseLayout title="Home">
  <div class="max-w-4xl mx-auto px-6 py-12">
    <section class="mb-16">
      <h1 class="text-4xl md:text-5xl font-bold mb-6">
        Hey, I'm <span class="text-brand-orange">Tamm</span>
      </h1>
      <p class="text-xl text-zinc-600 dark:text-zinc-400 leading-relaxed">
        Welcome to my corner of the internet. I write about technology, programming, and whatever else catches my interest.
      </p>
    </section>

    {latestPost && (
      <section>
        <h2 class="text-2xl font-semibold mb-6">Latest Post</h2>
        <a href={`/blog/${latestPost.slug}`} class="block group">
          <article class="border border-zinc-200 dark:border-zinc-800 rounded-lg p-6 hover:border-brand-orange transition-colors">
            <h3 class="text-xl font-semibold text-brand-orange group-hover:underline mb-2">
              {latestPost.data.title}
            </h3>
            <time class="text-sm text-zinc-500 dark:text-zinc-500">
              {latestPost.data.pubDate.toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
              })}
            </time>
            {latestPost.data.description && (
              <p class="mt-3 text-zinc-600 dark:text-zinc-400">
                {latestPost.data.description}
              </p>
            )}
          </article>
        </a>
        <a href="/blog" class="inline-block mt-6 text-brand-orange hover:underline">
          View all posts &rarr;
        </a>
      </section>
    )}
  </div>
</BaseLayout>
